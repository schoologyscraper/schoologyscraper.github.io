
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Full resolution photos for CHS class of 2029">
    <meta name="author" content="CC">
    <title>CHS Class of 2029 full resolution yearbook photos</title>
    <style>
      body {
        font-size: 15px;
        margin: 0;
        background-color: #f5f5f5;
      }
      .person {
        display: inline-block;
        text-align: center;
        margin: 5px 5px 30px 5px;
        vertical-align: top;
        width: calc(min(50vh,50vw) - 25px);
        height: calc(min(50vh,50vw) - 30px);
      }
      .person img {
        display: block;
        margin: 0 auto;
        height: calc(min(50vh,50vw) - 50px);
      }
      .person p {
        margin: 3px 0 0 0;
        font-size: min(3vh,3vw);
      }
      .hidden {
        display: none;
      }
      .center {
        text-align: center;
      }
      .searchbar-icon {
      	background-color: #ffffff;
        border: 0;
        outline: 0;
        border-radius: 1000px;
        padding: 5px;
        width: 30px;
        height: 30px;
        margin: 0;
        transition: 0.5s;
      }
      .searchbar-icon:hover {
      	background-color: #eeeeee;
        transition: 0.5s;
      }
      .searchbar {
        position: sticky;
        top: 0;
        left: 0;
        padding: 10px 10px 20px 10px;
        width: calc(100% - 20px);
        font-size: 20px;
      }
      .searchbar .background-blur {
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        mask: linear-gradient(black, black, black, transparent);
        backdrop-filter: blur(10px);
        width: 100%;
        height: calc(100% + 10px);
      }
      .searchbar input {
        flex: 1;
        border: 0;
        padding: 5px 10px;
        outline: none;
        font-size: 15px;
        border-radius: 1000px;
      }
      .searchbar .searchbar-input {
        background-color: #fff;
      	border: 1px solid #999999;
        width: 100%;
        display: flex;
        border-radius: 1000px;
      }
      .searchresults {
        padding: 10px;
      }
      .searchbar .background-blur {
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        mask: linear-gradient(black, black, black, transparent);
        backdrop-filter: blur(10px);
        width: 100%;
        height: calc(100% + 10px);
      }
    </style>
  </head>
  <body>
    <div class="searchbar">
      <div class="background-blur"></div>
      <div class="searchbar-input">
        <button class="searchbar-icon" id="search-btn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.49,19l-5.73-5.73C15.53,12.2,16,10.91,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.41,0,2.7-0.47,3.77-1.24L19,20.49L20.49,19z M5,9.5C5,7.01,7.01,5,9.5,5S14,7.01,14,9.5S11.99,14,9.5,14S5,11.99,5,9.5z"></path><path d="M0,0h24v24H0V0z" fill="none"></path></svg>
        </button>
        <input id="input" placeholder="Search...">
      </div>
    </div>
    <div class="searchresults">
      <div class="center">
        <div id="app"></div>
      </div>
      <div id="noresult" class="hidden">
        No search results<br>
        Reasons why people might not show up:
        <ul>
          <li>The database currently only lists students in 9th grade in CHS</li>
          <li>Same name: if two people in FUHSD have the same name, they are most likely not listed in the database</li>
          <li>Unconventional ID range: I was unable to approximate few people's IDs, especially those who did not have yearbook photos on Schoology.</li>
          <li>Legal name and nickname conflict: People who go by a nickname may not be in the database</li>
        </ul>
      </div>
    </div>
    <script>addEventListener("error",(e)=>{alert(e.message)})</script>
    <script>
      (async function() {
        try {
          let database = await (await fetch("https://schoologyscraper.github.io/gp-photos-db.txt")).text()
          database = database.split("|")
          let app = document.getElementById("app")
          let input = document.getElementById("input")
          let noresult = document.getElementById("noresult")
          let people = []
          for (let i = 0; i < database.length; i += 2) {
            let person = document.createElement("div")
            person.classList.add("person")
            let url = `https://res.cloudinary.com/dvypvyzfe/image/upload/${database[i]}.png`
            person.innerHTML = `<img src="${url}"><p>${database[i+1]}</p>`
            app.appendChild(person)
            people.push({element:person,name:database[i+1],url:url})
          }
          input.addEventListener("input", () => {
            let matchFound = false
            for (let person of people) {
              if (person.name.toLowerCase().includes(input.value.toLowerCase().trim())) {
                matchFound = true
                person.element.classList.remove("hidden")
              } else {
                person.element.classList.add("hidden")
              }
            }
      
            if (matchFound) {
              noresult.classList.add("hidden")
              app.classList.remove("hidden")
            } else {
              app.classList.add("hidden")
              noresult.classList.remove("hidden")
            }
          })
        } catch(e) {
          console.error(e.message)
        }
      })()
    </script>
  </body>
</html>
