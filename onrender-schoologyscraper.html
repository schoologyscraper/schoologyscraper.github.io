<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Unofficial site with class of 2029's photos">
    <meta name="author" content="CC">
    <meta name="keywords" content="FUHSD, Fremont Union High School District, FHS, Fremont High School, Homestead High School, HHS, Cupertino High School, CHS, Lynbrook High School, LHS, Photo, Photos, Yearbook, Schoology">
    <title>Schoology scraper</title>
    <style>
      body {
        margin: 0;
        background-color: #f5f5f5;
      }
      .hidden {
        display: none !important;
      }
      .center {
        text-align: center;
      }
      .searchbar {
        position: sticky;
        top: 0;
        left: 0;
        padding: 10px 10px 20px 10px;
        width: calc(100% - 20px);
        font-size: 20px;
        z-index: 1000;
      }
      .searchbar .background-blur {
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        mask: linear-gradient(black, black, black, transparent);
        backdrop-filter: blur(10px);
        width: 100%;
        height: calc(100% + 10px);
      }
      .searchbar input {
        flex: 1;
        border: 0;
        padding: 5px 10px;
        outline: none;
        font-size: 15px;
      }
      .searchbar .searchbar-input {
        background-color: #fff;
        border: 1px solid #999999;
        width: 100%;
        display: flex;
        border-radius: 1000px;
      }
      #searchresults {
        text-align: center;
      }
      .person {
        display: inline-block;
        padding: 10px;
        text-align: center;
        cursor: pointer;
        border-radius: 10px;
        margin: 10px;
        width: 200px;
        transition: 0.3s;
      }
      .person:hover {
        background-color: #dfdfdf;
        transition: 0.3s;
      }
      .person div {
        position: relative;
        height: 160px;
        width: 200px;
        text-align: center;
      }
      .person div img {
        max-height: 160px;
        max-width: 200px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .person p {
        margin: 0;
        display: block;
      }

      .searchbar-icon {
        background-color: #ffffff;
        border: 0;
        outline: 0;
        border-radius: 1000px;
        padding: 5px;
        width: 30px;
        height: 30px;
        margin: 0;
        transition: 0.5s;
      }
      .searchbar-icon:hover {
        background-color: #eeeeee;
        transition: 0.5s;
      }
      #filter-menu {
        background-color: #f5f5f5;
        padding: 30px;
      }
      #popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        z-index: 999999;
      }
      #popup-background {
        background-color: rgba(0,0,0,0.2);
        width: 100%;
        height: 100%;
        cursor: pointer;
      }
      #popup-content {
        position: fixed;
        top: 10%;
        left: 10%;
        width: 80%;
        height: 80%;
        background-color: #f5f5f5;
        border-radius: 30px;
      }
      #popup-content > div {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }
      #popup-content > div > div{
        display: flex;
        align-items: center;
      }
      /**{outline:1px dashed #000 !important}*/
      .arrowsymbol {
        display: inline-block;
      }
      .popup-image {
        width: 200px;
        height: 200px;
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
      }
      .popup-image img {
        max-width: 200px;
        max-height: 200px;
      }
      .gray {
        color: #aaa;
      }
      .arrowsymbol {
        transform: scale(1);
        transition: 0.2s;
        user-select: none;
      }
      .arrowsymbol[disabled] {
        filter: opacity(30%);
      }
      .arrowsymbol:not([disabled]):hover {
        transform: scale(1.2);
        transition: 0.2s;
      }
      .arrowsymbol:not([disabled]):active {
        transform: scale(1.5);
        transition: 0s;
      }
    </style>
  </head>
  <body>
    <div class="searchbar">
      <div class="background-blur"></div>
      <div class="searchbar-input">
        <button class="searchbar-icon" id="search-btn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.49,19l-5.73-5.73C15.53,12.2,16,10.91,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.41,0,2.7-0.47,3.77-1.24L19,20.49L20.49,19z M5,9.5C5,7.01,7.01,5,9.5,5S14,7.01,14,9.5S11.99,14,9.5,14S5,11.99,5,9.5z"></path><path d="M0,0h24v24H0V0z" fill="none"></path></svg>
        </button>
        <input id="searchbar-input" placeholder="Search...">
        <button class="searchbar-icon" id="filter-btn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"></path></svg>
        </button>
      </div>
    </div>
    <div id="searchresults">
      <div class="center"><p>Database taken from <a href="https://schoologyscraper.onrender.com/">https://schoologyscraper.onrender.com</a> (this is not mine)</p><p>Click on a person for more information</p></div>
      <div id="app"></div>
      <div id="appEnd"></div>
    </div>
    <div id="popup" class="hidden">
      <div id="popup-background"></div>
      <div id="popup-content"></div>
    </div>
    <div id="filter-menu" class="hidden">
      <h2>Filter:</h2>
      <input id="checkbox-mvhs" type="checkbox" data-school="Monta Vista High School" checked><label for="checkbox-mvhs">Monta Vista</label><br>
      <input id="checkbox-fhs" type="checkbox" data-school="Fremont High School" checked><label for="checkbox-fhs">Fremont</label><br>
      <input id="checkbox-hhs" type="checkbox" data-school="Homestead High School" checked><label for="checkbox-hhs">Homestead</label><br>
      <input id="checkbox-chs" type="checkbox" data-school="Cupertino High School" checked><label for="checkbox-chs">Cupertino</label><br>
      <details>
        <summary>Other</summary>
        <input id="checkbox-fsd" type="checkbox" data-school="FUHSD Staff Directory"><label for="checkbox-fsd">FUHSD Staff Directory</label><br>
        <input id="checkbox-fuhsd" type="checkbox" data-school="Fremont Union High School District"><label for="checkbox-fuhsd">Fremont Union High School District</label><br>
        <input id="checkbox-tfs" type="checkbox" data-school="TEST FUHSD School"><label for="checkbox-tfs">TEST FUHSD School</label><br>
        <input id="checkbox-eo" type="checkbox" data-school="Educational Options"><label for="checkbox-eo">Educational Options</label><br>
        <input id="checkbox-is" type="checkbox" data-school="Independent Study"><label for="checkbox-is">Independent Study</label><br>
        <input id="checkbox-cds" type="checkbox" data-school="Community Day School"><label for="checkbox-cds">Community Day School</label><br>
        <input id="checkbox-mc" type="checkbox" data-school="Middle College"><label for="checkbox-mc">Middle College</label><br>
        <input id="checkbox-fss" type="checkbox" data-school="FUHSD Summer School"><label for="checkbox-fss">FUHSD Summer School</label><br>
        <input id="checkbox-fas" type="checkbox" data-school="FUHSD Adult School"><label for="checkbox-fas">FUHSD Adult School</label><br>
      </details>
      <hr>
      <input id="checkbox-hasphoto" type="checkbox" data-hasphoto checked><label for="checkbox-hasphoto">Has Photo</label><br>
      <hr>
      <h2>Sort by</h2>
      <input id="checkbox-reverse" type="checkbox" data-sort-reversed><label for="checkbox-reverse">Reversed</label><br>
      <input id="checkbox-schoologyID" type="radio" data-sort="schoologyID" name="filter-sort"><label for="checkbox-schoologyID">Schoology ID</label><br>
      <input id="checkbox-alphabetically" type="radio" data-sort="alphabetically" name="filter-sort" checked><label for="checkbox-alphabetically">Alphabetically</label>
    </div>


    <script>addEventListener("error",(e)=>{alert(e.message)})</script>
    <script>
      let appElement = document.getElementById("app")
      let appEndObserver = document.getElementById("appEnd")
      let searchQueryElement = document.getElementById("searchbar-input")
      let popup = document.getElementById("popup")
      let popupBackground = document.getElementById("popup-background")
      let popupContent = document.getElementById("popup-content")
      let filterMenu = document.getElementById("filter-menu")
      let filterButton = document.getElementById("filter-btn")
      document.getElementById("search-btn").addEventListener("click", (e) => {

      })
      let data
      let loadedIndex = 0
      let loadBuffer = 100
      function load() {
        if (data == null) {
          alert("Error: data not loaded yet")
          return
        }
        let currentPeopleLoaded = 0
        let fragment = document.createDocumentFragment()
        let schoolFilterCheckboxes = {}
        for (let checkbox of filterMenu.querySelectorAll("[data-school]")) {
          schoolFilterCheckboxes[checkbox.getAttribute("data-school")] = checkbox.checked
        }
        let searchHasPhoto = filterMenu.querySelector("[data-hasphoto]").checked
        while (currentPeopleLoaded < loadBuffer && loadedIndex < data.length) {
          let person = data[loadedIndex]
          let searchMatches = person.name.toLowerCase().includes(searchQueryElement.value.trim().toLowerCase()) || searchQueryElement.value.trim() == ""
          let schoolMatches = false
          let photoMatches = false
          for (let photo of person.image) {
            if (photo !== "https://asset-cdn.schoology.com/sites/all/themes/schoology_theme/images/user-default.svg") {
              photoMatches = true
              break
            }
          }
          if (!searchHasPhoto) photoMatches = true
          for (let school of person.school) {
            if (schoolFilterCheckboxes[school.trim()]) {
              schoolMatches = true
              break
            }
          }
          ++loadedIndex
          if (!searchMatches || !schoolMatches || !photoMatches) {
            continue
          }
          let personDiv = document.createElement("div")
          personDiv.classList.add("person")
          personDiv.setAttribute("data-index", loadedIndex-1)
          let images = ""
          for (let i = 0; i < person.image.length; ++i) {
            images += `<img src="${person.image[i].replace("profile_reg","profile_big")}" style="z-index:${person.image.length-i};opacity:${Math.max(0,1-i/3)};rotate: ${5*i}deg">`
          }
          personDiv.innerHTML = `<div>${images}</div><p>${person.name}</p>`
          fragment.appendChild(personDiv)
            ++currentPeopleLoaded
        }
        app.appendChild(fragment)
      }
      (async function() {
        try {
          data = (await (await fetch("https://securecentrix81.github.io/schoologyscraper/2025-09-14.json")).json()).students
          sortData()
          load()
          let lastLoadTime = 0
          let observer = new IntersectionObserver(() => {
            if (Date.now() - lastLoadTime < 100) return
            lastLoadTime = Date.now()
            load()
          }, {
            root: null,
            rootMargin: "2000px",
            scrollMargin: "0px",
            threshold: 0.0,
          });
          observer.observe(appEndObserver)
        } catch (e) {
          alert("An error occurred. Details: \n"+e)
        }
      })()
      searchQueryElement.addEventListener("input", (e) => {
        loadedIndex = 0
        appElement.innerHTML = ""
        load()
      })
      let popupIndex = -1
      let popupImageIndex = 0
      app.addEventListener("click", (e) => {
        let dataIndex = e.target.closest("[data-index]")
        if (dataIndex) {
          dataIndex = parseInt(dataIndex.getAttribute("data-index"))
          let jsonData = data[dataIndex]
          popupIndex = dataIndex
          popupImageIndex = 0
          popup.classList.remove("hidden")
          document.body.style.overflow = "hidden"
          let leftSVG = `
<?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="40px" height="40px" viewBox="-19.04 0 75.803 75.803" xmlns="http://www.w3.org/2000/svg">
<g id="Group_64" data-name="Group 64" transform="translate(-624.082 -383.588) ">
<path id="Path_56" data-name="Path 56" d="M660.313,383.588a1.5,1.5,0,0,1,1.06,2.561l-33.556,33.56a2.528,2.528,0,0,0,0,3.564l33.556,33.558a1.5,1.5,0,0,1-2.121,2.121L625.7,425.394a5.527,5.527,0,0,1,0-7.807l33.556-33.559A1.5,1.5,0,0,1,660.313,383.588Z" fill="#000000"/>
      </g>
      </svg>`
          let rightSVG = `
<?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="40px" height="40px" viewBox="-19.04 0 75.803 75.803" xmlns="http://www.w3.org/2000/svg">
<g id="Group_64" data-name="Group 64" transform="rotate(180 18.8615 37.9015) translate(-624.082 -383.588) ">
<path id="Path_56" data-name="Path 56" d="M660.313,383.588a1.5,1.5,0,0,1,1.06,2.561l-33.556,33.56a2.528,2.528,0,0,0,0,3.564l33.556,33.558a1.5,1.5,0,0,1-2.121,2.121L625.7,425.394a5.527,5.527,0,0,1,0-7.807l33.556-33.559A1.5,1.5,0,0,1,660.313,383.588Z" fill="#000000"/>
      </g>
      </svg>`
          popupContent.innerHTML = `<div><div><div class="arrowsymbol left" disabled>${leftSVG}</div><div class="popup-image"><img src="${jsonData.image[0].replace("profile_reg","profile_big")}"></div><div class="arrowsymbol right"${jsonData.image.length > 1?"":" disabled"}>${rightSVG}</div></div><p>${jsonData.name}</p><p>${jsonData.school.map(e=>e.trim()).join(", ")}</p><a href="https://fuhsd.schoology.com/user/${jsonData.id}/info">Schoology ID: ${jsonData.id}</a><p class="gray">Courses: ${jsonData.courses}</p><p class="gray">Groups: ${jsonData.groups}</p></div>`
        }
      })
      popupContent.addEventListener("click", (e) => {
        let closestTarget = e.target.closest("div")
        if (closestTarget.classList.contains("arrowsymbol")) {
          let isRight = closestTarget.classList.contains("right")
          if (isRight && popupImageIndex + 1 < data[popupIndex].image.length) {
            ++popupImageIndex
          } else if (!isRight && popupImageIndex > 0) {
            --popupImageIndex
          }
          popupContent.querySelector("div.popup-image img").src = data[popupIndex].image[popupImageIndex].replace("profile_reg","profile_big")
          if (popupImageIndex + 1 >= data[popupIndex].image.length) {
            popupContent.querySelector(".arrowsymbol.right").setAttribute("disabled", "")
          } else {
            popupContent.querySelector(".arrowsymbol.right").removeAttribute("disabled")
          }
          if (popupImageIndex <= 0) {
            popupContent.querySelector(".arrowsymbol.left").setAttribute("disabled", "")
          } else {
            popupContent.querySelector(".arrowsymbol.left").removeAttribute("disabled")
          }
        }
      })
      popupBackground.addEventListener("click", (e) => {
        popup.classList.add("hidden")
        searchresults.classList.remove("hidden")
        document.body.style.overflow = "scroll"
      })
      filterButton.addEventListener("click", (e) => {
        if (filterMenu.classList.contains("hidden")) {
          filterMenu.classList.remove("hidden")
          searchresults.classList.add("hidden")
        } else {
          filterMenu.classList.add("hidden")
          searchresults.classList.remove("hidden")
        }
      })
      function sortData() {
        let sortMethod = ""
        for (let element of document.querySelectorAll("[data-sort]")) {
          if (element.checked) sortMethod = element.getAttribute("data-sort")
        }
        if (sortMethod === "alphabetically") {
          data = data.sort((a, b) => a.name.localeCompare(b.name))
        }
        if (sortMethod === "schoologyID") {
          data = data.sort((a, b) => a.id-b.id)
        }
        if (document.querySelector("[data-sort-reversed]").checked) {
          data.reverse()
        }
      }
      let lastSort = ""
      let lastSortReversed = document.querySelector("[data-sort-reversed]").checked
      for (let element of document.querySelectorAll("[data-sort]")) {
        if (element.checked) lastSort = element.getAttribute("data-sort")
      }
      filterMenu.addEventListener("click", (e) => {
        let sortMethod = ""
        let sortReversed = document.querySelector("[data-sort-reversed]").checked
        for (let element of document.querySelectorAll("[data-sort]")) {
          if (element.checked) sortMethod = element.getAttribute("data-sort")
        }
        if (lastSort !== sortMethod || lastSortReversed !== sortReversed) {
          lastSortReversed = sortReversed
          lastSort = sortMethod
          sortData()
        }
        loadedIndex = 0
        appElement.innerHTML = ""
        load()
      })
    </script>
  </body>
</html>
